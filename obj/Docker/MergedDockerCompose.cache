services:
  eventstore:
    container_name: eventstore
    environment:
      EVENTSTORE_EXT_HTTP_PORT: '2113'
      EVENTSTORE_EXT_TCP_PORT: '1113'
      EVENTSTORE_MEM_DB: "True"
    image: eventstore/eventstore
    ports:
    - published: 2113
      target: 2113
    - published: 1113
      target: 1113
  rabbitmq:
    container_name: rabbit
    environment:
      RABBITMQ_DEFAULT_PASS: some_password
      RABBITMQ_DEFAULT_USER: rabbitmquser
    hostname: localhost
    image: rabbitmq:3.8-rc-management
    ports:
    - published: 5672
      target: 5672
    - published: 15672
      target: 15672
  ravendb:
    container_name: roomservicemanagementravendb
    environment:
      RAVEN_License.Eula.Accepted: "true"
      RAVEN_RunInMemory: "true"
      RAVEN_Security_UnsecuredAccessAllowed: PublicNetwork
      RAVEN_Setup_Mode: None
    image: ravendb/ravendb
    ports:
    - published: 8080
      target: 8080
  roomservicemanagement.api:
    build:
      context: C:\Users\joliv\source\UOCHotels
      dockerfile: RoomServiceManagement.Api/Dockerfile
    depends_on:
    - eventstore
    - rabbitmq
    - ravendb
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ASPNETCORE_HTTPS_PORT: '44386'
      ASPNETCORE_URLS: https://+:443;http://+:80
      AppSettings__JwtSecret: aasd3423423rji23jri23rj23jrj23rji23ii3
      AzureStorage__ConnectionString: DefaultEndpointsProtocol=https;AccountName=storage203tests;AccountKey=D9eYPS1iyppBpcDadlpF63DL2DxWDYaPIQSd1zxB6jx2K0a2LrbozqjjYgauhVQnxhncGeMwUt625Fl10jL9bg==;EndpointSuffix=core.windows.net
      COMPOSE_CONVERT_WINDOWS_PATHS: '1'
      EventStore__ConnectionString: ConnectTo=tcp://admin:changeit@host.docker.internal:1113;     DefaultUserCredentials=admin:changeit;
      RabbitMQ__HostName: host.docker.internal
      RabbitMQ__Password: some_password
      RabbitMQ__Port: '5672'
      RabbitMQ__User: rabbitmquser
    image: roomservicemanagement
    ports:
    - published: 53838
      target: 80
    - published: 44386
      target: 443
    volumes:
    - C:\Users\joliv\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:rw
    - C:\Users\joliv\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:rw
version: '3.4'